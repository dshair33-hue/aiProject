:root{
  --bg:#0f1221;
  --panel:#1b1f38;
  --panel-2:#14172b;
  --accent:#4cc9f0;
  --accent-2:#f72585;
  --text:#e6e7ee;
  --muted:#9aa0b4;
  --success:#2ec4b6;
  --danger:#ef476f;
  --warning:#ffd166;
}
*{box-sizing:border-box}
html,body,#app{height:100%}
body{
  margin:0;
  background:radial-gradient(1200px 800px at 20% -10%, #18203a, var(--bg));
  color:var(--text);
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}
.top-bar{
  display:flex; align-items:center; justify-content:flex-start;
  padding:12px 16px; border-bottom:1px solid #2a2e4b; background:var(--panel);
}
.stage-indicator{display:flex; gap:8px; align-items:center; font-size:18px}
.stage-indicator strong{font-size:22px; color:var(--accent)}

.battle-area{
  max-width:960px; margin:20px auto; padding:16px; display:grid; gap:20px;
  grid-template-rows:auto auto auto; align-items:center;
}
.board{background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid #2a2e4b; border-radius:10px; padding:12px}
.board-title{font-weight:700; color:var(--muted); margin-bottom:8px}

.grid{
  --cols:5; --rows:2;
  display:grid; grid-template-columns:repeat(var(--cols), 1fr);
  grid-template-rows:repeat(var(--rows), minmax(64px, 96px));
  gap:8px; padding:8px; background:rgba(255,255,255,0.02); border-radius:8px;
}
.cell{
  position:relative; border:1px dashed #3a3f62; border-radius:8px; background:rgba(255,255,255,0.03);
  display:flex; align-items:center; justify-content:center; overflow:hidden; isolation:isolate;
}
.cell.player-drop{cursor:pointer}
.cell:hover{border-color:#5c6290}

.entity{position:relative; width:90%; height:78%; border-radius:8px; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; padding:6px; gap:6px}
.entity.enemy{background:linear-gradient(180deg, rgba(247, 37, 133, 0.25), rgba(247, 37, 133, 0.12)); border:1px solid rgba(247, 37, 133, 0.35)}
.entity.player{background:linear-gradient(180deg, rgba(76, 201, 240, 0.25), rgba(76, 201, 240, 0.12)); border:1px solid rgba(76, 201, 240, 0.35)}
.entity.dead{opacity:0.35; filter:grayscale(0.6)}
.entity-name{font-size:12px; text-align:center; color:#cfd3e6; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; width:100%}
.hpbar{width:100%; height:10px; background:#2a2e4b; border-radius:6px; overflow:hidden; border:1px solid #3c4168}
.hpbar > .fill{height:100%; width:100%; background:linear-gradient(90deg, var(--success), #7be6dc); transition:width 120ms linear}
.hpbar.danger > .fill{background:linear-gradient(90deg, var(--danger), #ff8fa3)}

.controls{display:flex; align-items:center; justify-content:center; gap:24px}
.controls .hint{color:var(--muted); font-size:12px; margin-top:6px}

.btn{appearance:none; border:none; border-radius:8px; padding:10px 16px; font-weight:700; cursor:pointer}
.btn-primary{background:var(--accent); color:#0a0e1a}
.btn-primary:disabled{opacity:0.5; cursor:not-allowed}
.btn-secondary{background:#2a2e4b; color:#e6e7ee}

.overlay{position:fixed; inset:0; background:rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; padding:16px}
.overlay.hidden{display:none}
.dialog{width:min(520px, 92vw); background:var(--panel); border:1px solid #2a2e4b; border-radius:12px; padding:16px}
.dialog-title{font-size:20px; font-weight:800; margin-bottom:8px}
.dialog-body{color:#cfd3e6; white-space:pre-line}
.dialog-actions{display:flex; justify-content:flex-end; margin-top:12px}

.unit-loadout{display:flex; flex-direction:column; gap:6px; align-items:flex-start}
select#unitSelector{background:#0f1221; border:1px solid #2a2e4b; color:#e6e7ee; border-radius:6px; padding:6px 8px}
